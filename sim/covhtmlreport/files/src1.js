var g_data = {"name":"../tb/test_bench.v","src":"module test_bench;\n\n	reg sys_clk;\n	reg sys_rst_n;\n	reg tim_psel;\n	reg tim_penable;\n	reg [11:0] tim_paddr;\n	reg [31:0] tim_pwdata;\n	reg [3:0] tim_pstrb;\n	reg tim_pwrite;\n	reg dbg_mode;\n\n	wire [31:0] tim_prdata;\n	wire tim_pready;\n	wire tim_pslverr;\n	wire tim_int;\n	\n	reg pslverr_detected;\n	reg pslverr_exp;\n	integer err;\n	reg [31:0] tmp;\n	parameter TCR   = 12'h00;\n	parameter TDR0  = 12'h04;\n	parameter TDR1  = 12'h08;\n	parameter TCMP0 = 12'h0c;\n	parameter TCMP1 = 12'h10;\n	parameter TIER  = 12'h14;\n	parameter TISR  = 12'h18;\n	parameter THCSR = 12'h1c;\n\n	timer_top u(\n		.sys_clk(sys_clk),\n		.sys_rst_n(sys_rst_n),\n		.tim_psel(tim_psel),\n		.tim_penable(tim_penable),\n		.tim_paddr(tim_paddr),\n		.tim_pwdata(tim_pwdata),\n		.tim_pstrb(tim_pstrb),\n		.tim_pwrite(tim_pwrite),\n		.dbg_mode(dbg_mode),\n		.tim_prdata(tim_prdata),\n		.tim_pready(tim_pready),\n		.tim_pslverr(tim_pslverr),\n		.tim_int(tim_int)\n	);\n\n	`include \"run_test.v\"\n	\n	initial begin\n		sys_clk = 0;\n		forever #25 sys_clk = ~sys_clk;\n	end\n\n	initial begin\n		sys_rst_n = 1'b0;\n		#50;\n		sys_rst_n = 1'b1;\n	end \n\n	initial begin\n		#200;\n		run_test();\n		#500;\n		if(err != 0) begin \n			$display(\"Test_result FAILED\");\n		end else begin\n			$display(\"Test_result PASSED\");\n		end\n		$finish;\n	end\n\n	initial begin\n	tim_psel = 0;\n	tim_penable = 0;\n	tim_penable = 0;\n	dbg_mode = 0;\n	err = 0;\n	pslverr_exp = 0;\n	#500;\n\n//	read(12'h00, tmp);\n//	cmp(tmp, 12'h00, 32'h0000_0100, 32'hffff_ffff);\n	\n//	#500;\n//	$finish;\n	end\n\n	task write;\n		input [11:0] addr;\n		input [31:0] data;\n		begin\n			tim_pstrb = 4'b1111;\n		//	pslverr_detected = 0;\n			$display(\"t=%10d [TB_WRITE]: addr=%x data=%x\", $time, addr, data);\n\n			@(posedge sys_clk);\n			#1;\n			tim_psel = 1;\n			tim_pwrite = 1;\n			tim_paddr = addr;\n			tim_pwdata = data;\n			\n			@(posedge sys_clk);\n			#1;\n			tim_penable = 1;\n			wait(tim_pready == 1);\n			#1;\n\n			if(tim_pslverr == 1) begin\n				if(pslverr_exp == 1 ) begin \n					pslverr_detected = 1;\n				end else begin \n			end\n			end\n			\n			@(posedge sys_clk);\n			#1;\n			tim_pwrite = 0;\n			tim_psel = 0;\n			tim_penable = 0;\n			tim_paddr = 0;\n			tim_pwdata = 0;\n			#10;\n		end\n	endtask\n\n			\n	task read;\n		input [11:0] addr;\n		output [31:0] data;\n		begin\n			pslverr_detected = 0;\n\n			@(posedge sys_clk);\n			#1;\n			tim_psel = 1;\n			tim_pwrite = 0;\n			tim_paddr = addr;\n			\n			@(posedge sys_clk);\n			#1;\n			tim_penable = 1;\n			wait(tim_pready == 1);\n			#1;\n			data = tim_prdata;\n			if(tim_pslverr == 1) begin\n				if(pslverr_exp == 1 ) begin \n					pslverr_detected = 1;\n				end else begin \n				$display(\"=================================================\");\n				$display(\"t=%10d PASS: pslverr detected\", $time);\n				$display(\"=================================================\");\n			//	err = err + 1;\n				end\n			end\n			\n			@(posedge sys_clk);\n			#1;\n			tim_pwrite = 0;\n			tim_psel = 0;\n			tim_penable = 0;\n			tim_paddr = 0;\n			tim_pwdata = 0;\n\n			$display(\"t=%10d [TB_READ]: addr=%x, data=%x\", $time, addr, data);\n			#10;\n		end\n	endtask\n	\n	task write_pstrb;\n		input [11:0] addr;\n		input [31:0] data;\n		input [3:0] pstrb;\n\n		begin\n			pslverr_detected = 0;\n			$display(\"%10d WRITE_PSTRB: addr=%x, data=%x, pstrb=%x\", $time, addr, data, pstrb);\n			@(posedge sys_clk);\n			#1;\n			tim_psel = 1;\n			tim_pwrite = 1;\n			tim_paddr = addr;\n			tim_pwdata = data;\n			tim_pstrb = pstrb;\n			\n			@(posedge sys_clk);\n			#1;\n			tim_penable = 1;\n			wait(tim_pready == 1);\n			#1;\n\n			if(tim_pslverr == 1) begin\n				if(pslverr_exp == 1 ) begin \n					pslverr_detected = 1;\n				end else begin \n				$display(\"=================================================\");\n				$display(\"t=%10d PASS: pslverr detected\", $time);\n				$display(\"=================================================\");\n			//	err = err + 1;\n				end\n			end\n			\n			@(posedge sys_clk);\n			#1;\n			tim_pwrite = 0;\n			tim_psel = 0;\n			tim_penable = 0;\n			tim_paddr = 0;\n			tim_pwdata = 0;\n			tim_pstrb = 0;\n			#10;\n		end\n	endtask\n\n\n	\n	task cmp;\n		input [31:0] data;\n		input [31:0] addr;\n		input [31:0] exp_data;\n		input [31:0] mask;\n\n		begin\n			if((data & mask ) === (exp_data & mask)) begin\n				$display(\"=================================================\");\n				$display(\"%10d PASS: rdata = %x at address %x is correct\", $time, data, addr);\n				$display(\"=================================================\");\n			end else begin\n				$display(\"=================================================\");\n				$display(\"%10d FAIL: rdata = %x at address %x is not correct, exp_data = %x\", $time, data, addr, exp_data);\n				$display(\"=================================================\");\n				err = err + 1;\n			end\n		end\n	endtask\n		\n	\n			\n\n\n\nendmodule\n","lang":"verilog"};
processSrcData(g_data);